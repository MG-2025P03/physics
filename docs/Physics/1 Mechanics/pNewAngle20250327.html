<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projectile Motion</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        #container {
            display: flex;
            justify-content: center;
            margin-top: 50px;
            align-items: center;
            flex-direction: column;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="graph"></div>
        <div>
            <label for="angleSlider">Initial Angle:</label>
            <input type="range" id="angleSlider" min="15" max="75" step="15" value="45" oninput="updateGraph()">
        </div>
        <div>
            <label for="heightSlider">Initial Height:</label>
            <input type="range" id="heightSlider" min="0" max="25" step="5" value="0" oninput="updateGraph()">
        </div>
        <div>
            <label for="gravitySlider">Gravity:</label>
            <select id="gravitySlider" onchange="updateGraph()">
                <option value="9.81">Earth</option>
                <option value="3.71">Mars</option>
                <option value="8.87">Venus</option>
                <option value="24.79">Jupiter</option>
                <option value="10.44">Saturn</option>
                <option value="8.69">Uranus</option>
                <option value="11.15">Neptune</option>
                <option value="1.62">Moon</option>
                <option value="3.7">Mercury</option>
            </select>
        </div>
    </div>

    <script>
        function calculateRangeAndMaxHeight(angle, initialHeight, initialVelocity, gravity) {
            const angleInRadians = angle * Math.PI / 180;
            let x = [];
            let y = [];
            
            for(let i = 0; i <= initialVelocity; i++){
                const t = (i - initialVelocity * Math.sin(angleInRadians)) / (-gravity);
                const range = initialVelocity * Math.cos(angleInRadians) * t;
                const maxHeight = initialHeight + initialVelocity * Math.sin(angleInRadians) * t - 0.5 * gravity * t * t;
                if (maxHeight < 0 || range < 0) break;
                x.push(range);
                y.push(maxHeight);
            }

            return {x, y};
        }

        function updateGraph() {
            const angle = document.getElementById("angleSlider").value;
            const initialHeight = document.getElementById("heightSlider").value;
            const gravity = parseFloat(document.getElementById("gravitySlider").value);

            // Initial conditions
            const initialVelocity = 50; // Change this value as needed

            const data = calculateRangeAndMaxHeight(parseFloat(angle), parseFloat(initialHeight), initialVelocity, gravity);

            const trace1 = {
                x: data.x,
                y: data.y,
                mode: 'lines+markers',
                name: 'Trajectory',
            };

            const layout = {
                title: 'Projectile Motion',
                xaxis: { title: 'Range'},
                yaxis: { title: 'Height', range: [0, Math.max(...data.y, 10)] }, // Adjust max value as needed
                height: 600,
                width: 600
            };

            Plotly.newPlot('graph', [trace1], layout);
        }

        updateGraph();
    </script>
</body>
</html>