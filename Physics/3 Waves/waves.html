<!DOCTYPE html>
<html>
<head>
  <title>Wave Interference with Plotly</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>

  <h1>Wave Interference Simulation</h1>

  <label for="numSources">Number of Sources (0-300):</label>
  <input type="range" id="numSources" min="0" max="300" value="4" oninput="updatePlot()">

  <div id="plot"></div>

  <script>
    // Constants
    let slider;

function setup() {
  createCanvas(600, 600);
  slider = createSlider(1, 100, 3, 1);
  slider.position(10, height + 10);
}

function draw() {
  background(255);
  let n = slider.value();

  translate(width / 2, height / 2);
  beginShape();
  for (let i = 0; i < TWO_PI; i += TWO_PI / n) {
    let x = cos(i) * 200;
    let y = sin(i) * 200;
    vertex(x, y);
  }
  endShape(CLOSE);

  loadPixels();
  for (let x = -width / 2; x < width / 2; x++) {
    for (let y = -height / 2; y < height / 2; y++) {
      let sum = 0;
      for (let i = 0; i < n; i++) {
        let angle = TWO_PI / n * i;
        let sx = cos(angle) * 200;
        let sy = sin(angle) * 200;
        let d = dist(x, y, sx, sy);
        
        sum += sin(d / 10 - millis() / 1000.0);
      }
      let index = 4 * ((y + height / 2) * width + (x + width / 2));
      let col = map(sum, -n, n, 0, 255);
      pixels[index] = col;
      pixels[index + 1] = col;
      pixels[index + 2] = col;
      pixels[index + 3] = 255;
    }
  }
  updatePixels();
}
  </script>

</body>
</html>