<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projectile Motion: Range vs Angle</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.4.4/math.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        #input-container {
            margin-bottom: 20px;
        }
        .input-box {
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>Projectile Motion: Range vs Angle</h1>

    <div id="input-container">
        <label for="initial-velocity">Initial Velocity (m/s):</label>
        <input type="number" id="initial-velocity" class="input-box" value="20" min="0"><br>
        
        <label for="initial-height">Initial Height (m):</label>
        <input type="number" id="initial-height" class="input-box" value="0" min="0"><br>
        
        <label for="gravity">Gravity (m/sÂ²):</label>
        <input type="number" id="gravity" class="input-box" value="9.81" min="0"><br>
        
        <label for="angle-range">Angle Range (degrees):</label>
        <input type="number" id="angle-range" class="input-box" value="45" min="0" max="90"><br>

        <button id="update-btn">Update Graph</button>
    </div>

    <div id="graph"></div>

    <script>
        document.getElementById("update-btn").addEventListener("click", function() {
            const v0 = parseFloat(document.getElementById("initial-velocity").value);
            const h0 = parseFloat(document.getElementById("initial-height").value);
            const g = parseFloat(document.getElementById("gravity").value);
            const angleRange = parseFloat(document.getElementById("angle-range").value);

            // Arrays to hold the range and angles
            let angles = [];
            let ranges = [];
            let times = [];

            // Calculate range and time for each angle from 0 to the input angle range
            for (let theta = 0; theta <= angleRange; theta++) {
                const thetaRad = math.unit(theta, 'deg').toNumber('rad'); // Convert angle to radians
                const range = calculateRange(v0, h0, g, thetaRad);
                const time = calculateTime(v0, h0, g, thetaRad);

                angles.push(theta);
                ranges.push(range);
                times.push(time);
            }

            // Plotting the graph using Plotly
            const data = [
                {
                    x: angles,
                    y: ranges,
                    type: 'scatter',
                    mode: 'lines+markers',
                    name: 'Range vs Angle',
                    marker: { color: 'blue' }
                },
                {
                    x: angles,
                    y: times,
                    type: 'scatter',
                    mode: 'lines+markers',
                    name: 'Time of Flight vs Angle',
                    marker: { color: 'green' }
                }
            ];

            const layout = {
                title: 'Projectile Motion: Range and Time of Flight vs Angle',
                xaxis: { title: 'Angle of Projection (degrees)' },
                yaxis: { title: 'Range (m) / Time (s)' },
                showlegend: true
            };

            Plotly.newPlot('graph', data, layout);
        });

        // Function to calculate range
        function calculateRange(v0, h0, g, theta) {
            const term1 = v0 * Math.cos(theta);
            const term2 = v0 * Math.sin(theta);
            const sqrtTerm = Math.sqrt(Math.pow(v0 * Math.sin(theta), 2) + 2 * g * h0);
            return (term1 / g) * (term2 + sqrtTerm);
        }

        // Function to calculate time of flight
        function calculateTime(v0, h0, g, theta) {
            const term1 = v0 * Math.sin(theta) / g;
            const term2 = Math.sqrt(Math.pow(v0 * Math.sin(theta), 2) / Math.pow(g, 2) + 2 * h0 / g);
            return term1 + term2;
        }
    </script>
</body>
</html>
